<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AyobaBiz Connect</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        .sidebar { height: 100vh; width: 200px; position: fixed; top: 0; left: 0; background: #f8f9fa; padding: 10px; }
        .content { margin-left: 220px; padding: 20px; }
        .section { display: none; }
        .settings-panel { position: fixed; top: 10%; right: 0; background: #fff; border: 1px solid #ddd; padding: 10px; width: 250px; }
        .chat-box { border: 1px solid #ddd; height: 300px; overflow-y: auto; padding: 10px; }
    </style>
    <script>
        function showSection(id) {
            document.querySelectorAll('.section').forEach(section => {
                section.style.display = 'none';
            });
            document.getElementById(id).style.display = 'block';
        }

        function toggleSettings() {
            const panel = document.getElementById('settings-panel');
            panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
        }

        async function handleFormSubmit(event, endpoint) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const data = {};
            formData.forEach((value, key) => {
                data[key] = value;
            });
            const response = await fetch(`https://gatewayapi-e65e2b5c01f7.herokuapp.com/api/${endpoint}/`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data),
            });
            const result = await response.json();
            document.getElementById('result').textContent = JSON.stringify(result, null, 2);
        }

        async function handleGetRequest(endpoint) {
            const response = await fetch(`https://gatewayapi-e65e2b5c01f7.herokuapp.com/api/${endpoint}/`);
            const result = await response.json();
            document.getElementById('result').textContent = JSON.stringify(result, null, 2);
        }

        async function sendMessage(event) {
            event.preventDefault();
            const message = document.getElementById('chat-message').value;
            const response = await fetch('https://gatewayapi-e65e2b5c01f7.herokuapp.com/api/messages/', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ text: message }),
            });
            const result = await response.json();
            document.getElementById('chat-box').innerHTML += `<div><b>You:</b> ${message}</div>`;
            document.getElementById('chat-message').value = '';
            document.getElementById('chat-box').innerHTML += `<div><b>Business:</b> ${result.text}</div>`;
        }
    </script>
</head>
<body>
    <div class="sidebar">
        <h4>AyobaBiz Connect</h4>
        <ul class="nav flex-column">
            <li class="nav-item">
                <a class="nav-link" href="#" onclick="showSection('fetch-orders')">Fetch Orders</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" onclick="showSection('create-order')">Create Order</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" onclick="showSection('chat')">Chat to Business</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" onclick="showSection('create-business-profile')">Create Business Profile</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" onclick="showSection('update-business-profile')">Update Business Profile</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" onclick="showSection('manage-contacts')">Manage Contacts</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" onclick="showSection('add-media')">Add Media</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" onclick="showSection('notifications')">Notifications</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" onclick="showSection('user-preferences')">User Preferences</a>
            </li>
        </ul>
    </div>

    <div class="content">
        <div id="fetch-orders" class="section">
            <h2>Fetch Orders</h2>
            <button type="button" class="btn btn-primary" onclick="handleGetRequest('orders')">Fetch Orders</button>
            <pre id="result"></pre>
        </div>

        <div id="create-order" class="section">
            <h2>Create Order</h2>
            <form onsubmit="handleFormSubmit(event, 'orders');">
                <div class="form-group">
                    <label for="customer">Customer ID</label>
                    <input type="text" class="form-control" id="customer" name="customer">
                </div>
                <div class="form-group">
                    <label for="total">Total</label>
                    <input type="text" class="form-control" id="total" name="total">
                </div>
                <button type="submit" class="btn btn-primary">Create Order</button>
            </form>
            <pre id="result"></pre>
        </div>

        <div id="chat" class="section">
            <h2>Chat to Business</h2>
            <div class="chat-box" id="chat-box">
                <!-- Chat messages will be appended here -->
            </div>
            <form onsubmit="sendMessage(event);">
                <div class="form-group">
                    <input type="text" class="form-control" id="chat-message" placeholder="Type your message here">
                </div>
                <button type="submit" class="btn btn-primary">Send</button>
            </form>
        </div>

        <div id="create-business-profile" class="section">
            <h2>Create Business Profile</h2>
            <form onsubmit="handleFormSubmit(event, 'businessprofiles');">
                <div class="form-group">
                    <label for="user">User ID</label>
                    <input type="text" class="form-control" id="user" name="user">
                </div>
                <div class="form-group">
                    <label for="business_name">Business Name</label>
                    <input type="text" class="form-control" id="business_name" name="business_name">
                </div>
                <div class="form-group">
                    <label for="contact_email">Contact Email</label>
                    <input type="email" class="form-control" id="contact_email" name="contact_email">
                </div>
                <div class="form-group">
                    <label for="contact_phone">Contact Phone</label>
                    <input type="text" class="form-control" id="contact_phone" name="contact_phone">
                </div>
                <div class="form-group">
                    <label for="address">Address</label>
                    <textarea class="form-control" id="address" name="address"></textarea>
                </div>
                <div class="form-group">
                    <label for="working_hours">Working Hours</label>
                    <textarea class="form-control" id="working_hours" name="working_hours"></textarea>
                </div>
                <div class="form-group">
                    <label for="description">Description</label>
                    <textarea class="form-control" id="description" name="description"></textarea>
                </div>
                <button type="submit" class="btn btn-primary">Create Profile</button>
            </form>
            <pre id="result"></pre>
        </div>

        <div id="update-business-profile" class="section">
            <h2>Update Business Profile</h2>
            <form onsubmit="handleFormSubmit(event, 'businessprofiles');">
                <div class="form-group">
                    <label for="profile_id">Profile ID</label>
                    <input type="text" class="form-control" id="profile_id" name="profile_id">
                </div>
                <div class="form-group">
                    <label for="business_name">Business Name</label>
                    <input type="text" class="form-control" id="business_name" name="business_name">
                </div>
                <div class="form-group">
                    <label for="contact_email">Contact Email</label>
                    <input type="email" class="form-control" id="contact_email" name="contact_email">
                </div>
                <div class="form-group">
                    <label for="contact_phone">Contact Phone</label>
                    <input type="text" class="form-control" id="contact_phone" name="contact_phone">
                </div>
                <div class="form-group">
                    <label for="address">Address</label>
                    <textarea class="form-control" id="address" name="address"></textarea>
                </div>
                <div class="form-group">
                    <label for="working_hours">Working Hours</label>
                    <textarea class="form-control" id="working_hours" name="working_hours"></textarea>
                </div>
                <div class="form-group">
                    <label for="description">Description</label>
                    <textarea class="form-control" id="description" name="description"></textarea>
                </div>
                <button type="submit" class="btn btn-primary">Update Profile</button>
            </form>
            <pre id="result"></pre>
        </div>

        <div id="manage-contacts" class="section">
            <h2>Manage Contacts</h2>
            <form onsubmit="handleFormSubmit(event, 'customers');">
                <div class="form-group">
                    <label for="name">Customer Name</label>
                    <input type="text" class="form-control" id="name" name="name">
                </div>
                <div class="form-group">
                    <label for="language">Preferred Language</label>
                    <input type="text" class="form-control" id="language" name="language">
                </div>
                <button type="submit" class="btn btn-primary">Add Customer</button>
            </form>
            <pre id="result"></pre>
        </div>

        <div id="add-media" class="section">
            <h2>Add Media</h2>
            <form onsubmit="handleFormSubmit(event, 'messages');">
                <div class="form-group">
                    <label for="media_url">Media URL</label>
                    <input type="text" class="form-control" id="media_url" name="media_url">
                </div>
                <button type="submit" class="btn btn-primary">Add Media</button>
            </form>
            <pre id="result"></pre>
        </div>

        <div id="notifications" class="section">
            <h2>Notifications</h2>
            <p>Manage notifications here.</p>
        </div>

        <div id="user-preferences" class="section">
            <h2>User Preferences</h2>
            <p>Set your preferences here.</p>
        </div>
    </div>

    <div id="settings-panel" class="settings-panel" style="display: none;">
        <h5>Settings</h5>
        <button class="btn btn-secondary" onclick="toggleSettings()">Close</button>
    </div>
    
    <!-- Bootstrap JS and dependencies -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
